(self.webpackChunkcloud_trade_sdk=self.webpackChunkcloud_trade_sdk||[]).push([[902],{85133:(t,e,n)=>{"use strict";n.d(e,{J:()=>i});var a=n(71926);const i=t=>{(0,a.Z)(t,3e5)}},31153:(t,e,n)=>{"use strict";n.d(e,{X:()=>C});var a=n(2784),i=n(84797),s=n(6391),u=n.n(s),o=n(42950),p=n.n(o),r=n(89201),y=n(66041);const d=[{inputs:[],payable:!1,stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"owner",type:"address"},{indexed:!0,internalType:"address",name:"spender",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Approval",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Burn",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1",type:"uint256"}],name:"Mint",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"sender",type:"address"},{indexed:!1,internalType:"uint256",name:"amount0In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1In",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount0Out",type:"uint256"},{indexed:!1,internalType:"uint256",name:"amount1Out",type:"uint256"},{indexed:!0,internalType:"address",name:"to",type:"address"}],name:"Swap",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint112",name:"reserve0",type:"uint112"},{indexed:!1,internalType:"uint112",name:"reserve1",type:"uint112"}],name:"Sync",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"from",type:"address"},{indexed:!0,internalType:"address",name:"to",type:"address"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"Transfer",type:"event"},{constant:!0,inputs:[],name:"DOMAIN_SEPARATOR",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"MINIMUM_LIQUIDITY",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"PERMIT_TYPEHASH",outputs:[{internalType:"bytes32",name:"",type:"bytes32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"},{internalType:"address",name:"",type:"address"}],name:"allowance",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"approve",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"balanceOf",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"}],name:"burn",outputs:[{internalType:"uint256",name:"amount0",type:"uint256"},{internalType:"uint256",name:"amount1",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"factory",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"getReserves",outputs:[{internalType:"uint112",name:"_reserve0",type:"uint112"},{internalType:"uint112",name:"_reserve1",type:"uint112"},{internalType:"uint32",name:"_blockTimestampLast",type:"uint32"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"_token0",type:"address"},{internalType:"address",name:"_token1",type:"address"}],name:"initialize",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"kLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"}],name:"mint",outputs:[{internalType:"uint256",name:"liquidity",type:"uint256"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"name",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[{internalType:"address",name:"",type:"address"}],name:"nonces",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"owner",type:"address"},{internalType:"address",name:"spender",type:"address"},{internalType:"uint256",name:"value",type:"uint256"},{internalType:"uint256",name:"deadline",type:"uint256"},{internalType:"uint8",name:"v",type:"uint8"},{internalType:"bytes32",name:"r",type:"bytes32"},{internalType:"bytes32",name:"s",type:"bytes32"}],name:"permit",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"price0CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"price1CumulativeLast",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"}],name:"skim",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"uint256",name:"amount0Out",type:"uint256"},{internalType:"uint256",name:"amount1Out",type:"uint256"},{internalType:"address",name:"to",type:"address"},{internalType:"bytes",name:"data",type:"bytes"}],name:"swap",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"symbol",outputs:[{internalType:"string",name:"",type:"string"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[],name:"sync",outputs:[],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!0,inputs:[],name:"token0",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"token1",outputs:[{internalType:"address",name:"",type:"address"}],payable:!1,stateMutability:"view",type:"function"},{constant:!0,inputs:[],name:"totalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],payable:!1,stateMutability:"view",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transfer",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"},{constant:!1,inputs:[{internalType:"address",name:"from",type:"address"},{internalType:"address",name:"to",type:"address"},{internalType:"uint256",name:"value",type:"uint256"}],name:"transferFrom",outputs:[{internalType:"bool",name:"",type:"bool"}],payable:!1,stateMutability:"nonpayable",type:"function"}],l=[{constant:!1,inputs:[],name:"decimals",outputs:[{internalType:"uint8",name:"",type:"uint8"}],payable:!1,stateMutability:"pure",type:"function"}];var c,m=n(23716),b=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function u(t){try{p(a.next(t))}catch(t){s(t)}}function o(t){try{p(a.throw(t))}catch(t){s(t)}}function p(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,o)}p((a=a.apply(t,e||[])).next())}))};!function(t){t[t.Not=1]="Not",t[t.Ing=2]="Ing",t[t.Yes=3]="Yes"}(c||(c={}));class v{constructor(){this.initial=c.Not,this.initial=c.Yes}init(t,e,n,a){return b(this,void 0,void 0,(function*(){this.web3=t,e&&(yield Promise.all([this.initLPContract(e),this.initBaseContract(n),this.initQuoteContract(a)]).catch((t=>{m.error(t)})))}))}initLPContract(t){return b(this,void 0,void 0,(function*(){this.lpContract=new this.web3.eth.Contract(d,t)}))}initBaseContract(t){return b(this,void 0,void 0,(function*(){this.baseContract=new this.web3.eth.Contract(l,t)}))}initQuoteContract(t){return b(this,void 0,void 0,(function*(){this.quoteContract=new this.web3.eth.Contract(l,t)}))}isInitialize(){return this.initial===c.Yes}}new v;var T=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function u(t){try{p(a.next(t))}catch(t){s(t)}}function o(t){try{p(a.throw(t))}catch(t){s(t)}}function p(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,o)}p((a=a.apply(t,e||[])).next())}))};const f=()=>T(void 0,void 0,void 0,(function*(){})),w={initTourist:!1,basePrice:0,basePool:0,baseDecimal:18,quotePool:0,quoteDecimal:18,poolValue:0,decimal:8},h=(t,e=!1)=>{const n=new t.BatchRequest;let a=[];const i={add:t=>(a.push(e?t.call():new Promise(((e,a)=>{n.add(t.call.request(((t,n)=>t?a(t):e(n))))}))),i),execute(){return T(this,void 0,void 0,(function*(){e||n.execute();const t=yield Promise.all(a);return a=[],t}))}};return i};var M=n(23716),x=function(t,e,n,a){return new(n||(n=Promise))((function(i,s){function u(t){try{p(a.next(t))}catch(t){s(t)}}function o(t){try{p(a.throw(t))}catch(t){s(t)}}function p(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n((function(t){t(e)}))).then(u,o)}p((a=a.apply(t,e||[])).next())}))};const C=({pair:t,base:e,quote:n})=>{const{web3Adapter:s,isBSC:o}=(0,y.dc)(),d=(0,a.useRef)(new v),[l,c]=(0,a.useState)(!1),[m,b]=(0,a.useState)(w),T=(0,a.useRef)(new(p())("https://bsc-dataseed1.binance.org/")),C=(0,i.D)((()=>x(void 0,void 0,void 0,(function*(){var t;if(T.current&&s&&l&&o){try{const[a,{_reserve0:i,_reserve1:o},p,l,c,b]=yield h(T.current,(null===(t=s.web3Modal)||void 0===t?void 0:t.cachedProvider)===y.w5.Binance).add(d.current.lpContract.methods.decimals()).add(d.current.lpContract.methods.getReserves()).add(d.current.lpContract.methods.token0()).add(d.current.lpContract.methods.token1()).add(d.current.baseContract.methods.decimals()).add(d.current.quoteContract.methods.decimals()).execute();m.decimal=Number(a),m.baseDecimal=Number(c),m.quoteDecimal=Number(b),m.quotePool=Number((0,r.fromWei)(p.toLowerCase()===n.toLowerCase()?i:o,"ether")),m.basePool=Number((0,r.fromWei)(l.toLowerCase()===e.toLowerCase()?o:i,"ether")),m.poolValue=new(u())(m.quotePool).multipliedBy(2).toNumber(),m.initTourist=!0}catch(t){M.error(t)}b(Object.assign({},m))}}))));(0,a.useEffect)((()=>{x(void 0,void 0,void 0,(function*(){T.current&&(yield d.current.init(T.current,t,e,n),d.current.isInitialize()&&c(!0))}))}),[t,T,e,n]),(0,a.useEffect)((()=>{l&&!m.initTourist&&o&&C()}),[C,l,m.initTourist,o]);const P=(0,i.D)((()=>x(void 0,void 0,void 0,(function*(){C()}))));return(0,a.useMemo)((()=>{const{basePool:t,baseDecimal:e,quotePool:n,quoteDecimal:a}=m;let i=new(u())(t),s=new(u())(n);e!==a&&(i=i.div(new(u())(Math.pow(10,e))),s=s.div(new(u())(Math.pow(10,a))));const p=0===t?0:s.div(i).toNumber();m.basePrice=p;const r={isBSC:o,calculator:m,onRefresh:f};return o?Object.assign(Object.assign({},r),{onRefresh:P}):Object.assign(Object.assign({},r),{calculator:w})}),[o,m,P])}},50936:()=>{},27464:()=>{},39415:()=>{},87162:()=>{}}]);